"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[6129],{2064:(r,n,e)=>{e.r(n),e.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"module-1-ros2/humanoid-urdf","title":"Humanoid Structure & URDF","description":"This chapter covers URDF (Unified Robot Description Format), the XML-based language used to describe robot models in ROS 2. You\'ll learn how to create humanoid robot models and connect them to the ROS 2 control system.","source":"@site/docs/module-1-ros2/03-humanoid-urdf.md","sourceDirName":"module-1-ros2","slug":"/module-1-ros2/humanoid-urdf","permalink":"/physical-ai-book/docs/module-1-ros2/humanoid-urdf","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module-1-ros2/03-humanoid-urdf.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Humanoid Structure & URDF"}}');var t=e(4848),o=e(8453);const l={sidebar_position:4,title:"Humanoid Structure & URDF"},a="Humanoid Structure & URDF: Describing Robots in Code",s={},c=[{value:"Introduction to URDF",id:"introduction-to-urdf",level:2},{value:"Why URDF is Important for Humanoids",id:"why-urdf-is-important-for-humanoids",level:3},{value:"Basic URDF Structure",id:"basic-urdf-structure",level:2},{value:"URDF Elements Explained",id:"urdf-elements-explained",level:2},{value:"Links",id:"links",level:3},{value:"Joints",id:"joints",level:3},{value:"Building a Minimal Humanoid URDF",id:"building-a-minimal-humanoid-urdf",level:2},{value:"Xacro: URDF&#39;s Macro System",id:"xacro-urdfs-macro-system",level:2},{value:"Connecting URDF to ROS 2",id:"connecting-urdf-to-ros-2",level:2},{value:"Robot State Publisher",id:"robot-state-publisher",level:3},{value:"Joint State Publisher",id:"joint-state-publisher",level:3},{value:"URDF Best Practices",id:"urdf-best-practices",level:2},{value:"1. Proper Inertial Properties",id:"1-proper-inertial-properties",level:3},{value:"2. Logical Link Hierarchy",id:"2-logical-link-hierarchy",level:3},{value:"3. Appropriate Joint Limits",id:"3-appropriate-joint-limits",level:3},{value:"Validating URDF Models",id:"validating-urdf-models",level:2},{value:"Using check_urdf",id:"using-check_urdf",level:3},{value:"Visualizing in RViz",id:"visualizing-in-rviz",level:3},{value:"Integration with Control Systems",id:"integration-with-control-systems",level:2},{value:"Joint State Message",id:"joint-state-message",level:3},{value:"Forward and Inverse Kinematics",id:"forward-and-inverse-kinematics",level:3},{value:"Troubleshooting Common Issues",id:"troubleshooting-common-issues",level:2},{value:"1. URDF Validation Errors",id:"1-urdf-validation-errors",level:3},{value:"2. Visualization Problems",id:"2-visualization-problems",level:3},{value:"3. Physics Simulation Issues",id:"3-physics-simulation-issues",level:3},{value:"Summary",id:"summary",level:2}];function d(r){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...r.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"humanoid-structure--urdf-describing-robots-in-code",children:"Humanoid Structure & URDF: Describing Robots in Code"})}),"\n",(0,t.jsx)(n.p,{children:"This chapter covers URDF (Unified Robot Description Format), the XML-based language used to describe robot models in ROS 2. You'll learn how to create humanoid robot models and connect them to the ROS 2 control system."}),"\n",(0,t.jsx)(n.h2,{id:"introduction-to-urdf",children:"Introduction to URDF"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"URDF (Unified Robot Description Format)"})," is an XML-based format that describes robot models in ROS. A URDF file contains information about:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Physical structure (links and joints)"}),"\n",(0,t.jsx)(n.li,{children:"Visual and collision properties"}),"\n",(0,t.jsx)(n.li,{children:"Inertial properties"}),"\n",(0,t.jsx)(n.li,{children:"Sensor locations"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"why-urdf-is-important-for-humanoids",children:"Why URDF is Important for Humanoids"}),"\n",(0,t.jsx)(n.p,{children:"Humanoid robots require precise modeling of their complex structure:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Multiple degrees of freedom in arms, legs, and torso"}),"\n",(0,t.jsx)(n.li,{children:"Proper joint constraints for realistic movement"}),"\n",(0,t.jsx)(n.li,{children:"Accurate inertial properties for physics simulation"}),"\n",(0,t.jsx)(n.li,{children:"Proper sensor placement for perception systems"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"basic-urdf-structure",children:"Basic URDF Structure"}),"\n",(0,t.jsxs)(n.p,{children:["A URDF file has a basic structure with ",(0,t.jsx)(n.code,{children:"<robot>"})," as the root element containing ",(0,t.jsx)(n.code,{children:"<link>"})," and ",(0,t.jsx)(n.code,{children:"<joint>"})," elements:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="simple_robot">\r\n  \x3c!-- Links define rigid bodies --\x3e\r\n  <link name="base_link">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.5 0.5 0.2"/>\r\n      </geometry>\r\n      <material name="blue">\r\n        <color rgba="0 0 1 0.8"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.5 0.5 0.2"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Joints connect links --\x3e\r\n  <link name="arm_link">\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.3"/>\r\n      </geometry>\r\n    </visual>\r\n  </link>\r\n\r\n  <joint name="arm_joint" type="revolute">\r\n    <parent link="base_link"/>\r\n    <child link="arm_link"/>\r\n    <origin xyz="0.3 0 0" rpy="0 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n    <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\r\n  </joint>\r\n</robot>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"urdf-elements-explained",children:"URDF Elements Explained"}),"\n",(0,t.jsx)(n.h3,{id:"links",children:"Links"}),"\n",(0,t.jsx)(n.p,{children:"Links represent rigid bodies in the robot. Each link can have multiple properties:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<link name="example_link">\r\n  \x3c!-- Visual properties (what you see) --\x3e\r\n  <visual>\r\n    <origin xyz="0 0 0" rpy="0 0 0"/>\r\n    <geometry>\r\n      \x3c!-- Choose one geometry type --\x3e\r\n      <box size="0.1 0.1 0.1"/>\r\n      \x3c!-- <cylinder radius="0.1" length="0.2"/> --\x3e\r\n      \x3c!-- <sphere radius="0.1"/> --\x3e\r\n      \x3c!-- <mesh filename="package://robot_description/meshes/link.stl"/> --\x3e\r\n    </geometry>\r\n    <material name="red">\r\n      <color rgba="1 0 0 1"/>\r\n    </material>\r\n  </visual>\r\n\r\n  \x3c!-- Collision properties (what the physics engine uses) --\x3e\r\n  <collision>\r\n    <origin xyz="0 0 0" rpy="0 0 0"/>\r\n    <geometry>\r\n      <box size="0.1 0.1 0.1"/>\r\n    </geometry>\r\n  </collision>\r\n\r\n  \x3c!-- Inertial properties (physics simulation) --\x3e\r\n  <inertial>\r\n    <mass value="0.5"/>\r\n    <origin xyz="0 0 0" rpy="0 0 0"/>\r\n    <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>\r\n  </inertial>\r\n</link>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"joints",children:"Joints"}),"\n",(0,t.jsx)(n.p,{children:"Joints connect links and define how they can move relative to each other:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Revolute joint (rotational) --\x3e\r\n<joint name="joint_name" type="revolute">\r\n  <parent link="parent_link"/>\r\n  <child link="child_link"/>\r\n  <origin xyz="0.1 0 0" rpy="0 0 0"/>\r\n  <axis xyz="0 0 1"/> \x3c!-- Rotation axis --\x3e\r\n  <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\r\n</joint>\r\n\r\n\x3c!-- Continuous joint (unlimited rotation) --\x3e\r\n<joint name="continuous_joint" type="continuous">\r\n  <parent link="base_link"/>\r\n  <child link="rotor"/>\r\n  <axis xyz="0 0 1"/>\r\n</joint>\r\n\r\n\x3c!-- Prismatic joint (linear motion) --\x3e\r\n<joint name="prismatic_joint" type="prismatic">\r\n  <parent link="base_link"/>\r\n  <child link="slider"/>\r\n  <axis xyz="1 0 0"/>\r\n  <limit lower="0" upper="0.1" effort="10.0" velocity="0.5"/>\r\n</joint>\r\n\r\n\x3c!-- Fixed joint (no motion) --\x3e\r\n<joint name="fixed_joint" type="fixed">\r\n  <parent link="base_link"/>\r\n  <child link="sensor_mount"/>\r\n</joint>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"building-a-minimal-humanoid-urdf",children:"Building a Minimal Humanoid URDF"}),"\n",(0,t.jsx)(n.p,{children:"Let's create a simple humanoid model with torso, head, arms, and legs:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="minimal_humanoid">\r\n  \x3c!-- Torso (base of the robot) --\x3e\r\n  <link name="torso">\r\n    <visual>\r\n      <origin xyz="0 0 0.5" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.3 0.2 1.0"/>\r\n      </geometry>\r\n      <material name="gray">\r\n        <color rgba="0.5 0.5 0.5 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0.5" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.3 0.2 1.0"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="10.0"/>\r\n      <origin xyz="0 0 0.5" rpy="0 0 0"/>\r\n      <inertia ixx="0.5" ixy="0.0" ixz="0.0" iyy="0.6" iyz="0.0" izz="0.2"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Head --\x3e\r\n  <link name="head">\r\n    <visual>\r\n      <geometry>\r\n        <sphere radius="0.1"/>\r\n      </geometry>\r\n      <material name="skin">\r\n        <color rgba="0.8 0.6 0.4 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <sphere radius="0.1"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.004" ixy="0.0" ixz="0.0" iyy="0.004" iyz="0.0" izz="0.004"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="neck_joint" type="revolute">\r\n    <parent link="torso"/>\r\n    <child link="head"/>\r\n    <origin xyz="0 0 1.0" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/> \x3c!-- Pitch (nodding) --\x3e\r\n    <limit lower="-0.5" upper="0.5" effort="5.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Left Arm --\x3e\r\n  <link name="left_upper_arm">\r\n    <visual>\r\n      <origin xyz="0 0 -0.15" rpy="1.57 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.3"/>\r\n      </geometry>\r\n      <material name="arm_color">\r\n        <color rgba="0.4 0.4 0.8 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="1.5"/>\r\n      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="left_shoulder_joint" type="revolute">\r\n    <parent link="torso"/>\r\n    <child link="left_upper_arm"/>\r\n    <origin xyz="0.2 0.1 0.6" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/> \x3c!-- Movement in front/back --\x3e\r\n    <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  <link name="left_lower_arm">\r\n    <visual>\r\n      <origin xyz="0 0 -0.15" rpy="1.57 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.04" length="0.3"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="left_elbow_joint" type="revolute">\r\n    <parent link="left_upper_arm"/>\r\n    <child link="left_lower_arm"/>\r\n    <origin xyz="0 0 -0.3" rpy="0 0 0"/>\r\n    <axis xyz="0 0 1"/> \x3c!-- Rotation around arm --\x3e\r\n    <limit lower="-1.57" upper="1.57" effort="8.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Right Arm (mirror of left arm) --\x3e\r\n  <link name="right_upper_arm">\r\n    <visual>\r\n      <origin xyz="0 0 -0.15" rpy="1.57 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.3"/>\r\n      </geometry>\r\n      <material name="arm_color">\r\n        <color rgba="0.4 0.4 0.8 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="1.5"/>\r\n      <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="right_shoulder_joint" type="revolute">\r\n    <parent link="torso"/>\r\n    <child link="right_upper_arm"/>\r\n    <origin xyz="0.2 -0.1 0.6" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  <link name="right_lower_arm">\r\n    <visual>\r\n      <origin xyz="0 0 -0.15" rpy="1.57 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.04" length="0.3"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.001"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="right_elbow_joint" type="revolute">\r\n    <parent link="right_upper_arm"/>\r\n    <child link="right_lower_arm"/>\r\n    <origin xyz="0 0 -0.3" rpy="0 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n    <limit lower="-1.57" upper="1.57" effort="8.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Left Leg --\x3e\r\n  <link name="left_upper_leg">\r\n    <visual>\r\n      <origin xyz="0 0 -0.2" rpy="1.57 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.06" length="0.4"/>\r\n      </geometry>\r\n      <material name="leg_color">\r\n        <color rgba="0.6 0.6 0.6 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="3.0"/>\r\n      <inertia ixx="0.05" ixy="0.0" ixz="0.0" iyy="0.05" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="left_hip_joint" type="revolute">\r\n    <parent link="torso"/>\r\n    <child link="left_upper_leg"/>\r\n    <origin xyz="-0.1 0.05 0" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/> \x3c!-- Forward/back movement --\x3e\r\n    <limit lower="-0.5" upper="1.0" effort="20.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  <link name="left_lower_leg">\r\n    <visual>\r\n      <origin xyz="0 0 -0.2" rpy="1.57 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.4"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="2.5"/>\r\n      <inertia ixx="0.04" ixy="0.0" ixz="0.0" iyy="0.04" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="left_knee_joint" type="revolute">\r\n    <parent link="left_upper_leg"/>\r\n    <child link="left_lower_leg"/>\r\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\r\n    <axis xyz="0 0 1"/> \x3c!-- Knee bending --\x3e\r\n    <limit lower="0" upper="1.57" effort="20.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  <link name="left_foot">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.2 0.1 0.05"/>\r\n      </geometry>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.2 0.1 0.05"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.002" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="left_ankle_joint" type="revolute">\r\n    <parent link="left_lower_leg"/>\r\n    <child link="left_foot"/>\r\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-0.5" upper="0.5" effort="10.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Right Leg (mirror of left leg) --\x3e\r\n  <link name="right_upper_leg">\r\n    <visual>\r\n      <origin xyz="0 0 -0.2" rpy="1.57 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.06" length="0.4"/>\r\n      </geometry>\r\n      <material name="leg_color">\r\n        <color rgba="0.6 0.6 0.6 1"/>\r\n      </material>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="3.0"/>\r\n      <inertia ixx="0.05" ixy="0.0" ixz="0.0" iyy="0.05" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="right_hip_joint" type="revolute">\r\n    <parent link="torso"/>\r\n    <child link="right_upper_leg"/>\r\n    <origin xyz="-0.1 -0.05 0" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-0.5" upper="1.0" effort="20.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  <link name="right_lower_leg">\r\n    <visual>\r\n      <origin xyz="0 0 -0.2" rpy="1.57 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.4"/>\r\n      </geometry>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="2.5"/>\r\n      <inertia ixx="0.04" ixy="0.0" ixz="0.0" iyy="0.04" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="right_knee_joint" type="revolute">\r\n    <parent link="right_upper_leg"/>\r\n    <child link="right_lower_leg"/>\r\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\r\n    <axis xyz="0 0 1"/>\r\n    <limit lower="0" upper="1.57" effort="20.0" velocity="1.0"/>\r\n  </joint>\r\n\r\n  <link name="right_foot">\r\n    <visual>\r\n      <geometry>\r\n        <box size="0.2 0.1 0.05"/>\r\n      </geometry>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <box size="0.2 0.1 0.05"/>\r\n      </geometry>\r\n    </collision>\r\n    <inertial>\r\n      <mass value="1.0"/>\r\n      <inertia ixx="0.001" ixy="0.0" ixz="0.0" iyy="0.002" iyz="0.0" izz="0.002"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  <joint name="right_ankle_joint" type="revolute">\r\n    <parent link="right_lower_leg"/>\r\n    <child link="right_foot"/>\r\n    <origin xyz="0 0 -0.4" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit lower="-0.5" upper="0.5" effort="10.0" velocity="1.0"/>\r\n  </joint>\r\n</robot>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"xacro-urdfs-macro-system",children:"Xacro: URDF's Macro System"}),"\n",(0,t.jsx)(n.p,{children:"For complex robots, Xacro (XML Macros) simplifies URDF by allowing variables, macros, and mathematical expressions:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="xacro_humanoid">\r\n\r\n  \x3c!-- Properties --\x3e\r\n  <xacro:property name="M_PI" value="3.1415926535897931" />\r\n  <xacro:property name="torso_length" value="1.0" />\r\n  <xacro:property name="torso_radius" value="0.15" />\r\n  <xacro:property name="arm_length" value="0.3" />\r\n  <xacro:property name="leg_length" value="0.4" />\r\n\r\n  \x3c!-- Materials --\x3e\r\n  <material name="blue">\r\n    <color rgba="0.0 0.0 0.8 1.0"/>\r\n  </material>\r\n  <material name="red">\r\n    <color rgba="0.8 0.0 0.0 1.0"/>\r\n  </material>\r\n  <material name="white">\r\n    <color rgba="1.0 1.0 1.0 1.0"/>\r\n  </material>\r\n\r\n  \x3c!-- Macro for creating an arm --\x3e\r\n  <xacro:macro name="arm" params="prefix side">\r\n    <link name="${prefix}_upper_arm">\r\n      <visual>\r\n        <origin xyz="0 0 -${arm_length/2}" rpy="${M_PI/2} 0 0"/>\r\n        <geometry>\r\n          <cylinder radius="0.05" length="${arm_length}"/>\r\n        </geometry>\r\n        <material name="blue"/>\r\n      </visual>\r\n      <inertial>\r\n        <mass value="1.5"/>\r\n        <inertia ixx="0.02" ixy="0.0" ixz="0.0" iyy="0.02" iyz="0.0" izz="0.001"/>\r\n      </inertial>\r\n    </link>\r\n\r\n    <joint name="${prefix}_shoulder_joint" type="revolute">\r\n      <parent link="torso"/>\r\n      <child link="${prefix}_upper_arm"/>\r\n      <origin xyz="0.2 ${side * 0.1} 0.6" rpy="0 0 0"/>\r\n      <axis xyz="0 1 0"/>\r\n      <limit lower="-1.57" upper="1.57" effort="10.0" velocity="1.0"/>\r\n    </joint>\r\n\r\n    <link name="${prefix}_lower_arm">\r\n      <visual>\r\n        <origin xyz="0 0 -${arm_length/2}" rpy="${M_PI/2} 0 0"/>\r\n        <geometry>\r\n          <cylinder radius="0.04" length="${arm_length}"/>\r\n        </geometry>\r\n        <material name="blue"/>\r\n      </visual>\r\n      <inertial>\r\n        <mass value="1.0"/>\r\n        <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.001"/>\r\n      </inertial>\r\n    </link>\r\n\r\n    <joint name="${prefix}_elbow_joint" type="revolute">\r\n      <parent link="${prefix}_upper_arm"/>\r\n      <child link="${prefix}_lower_arm"/>\r\n      <origin xyz="0 0 -${arm_length}" rpy="0 0 0"/>\r\n      <axis xyz="0 0 1"/>\r\n      <limit lower="-1.57" upper="1.57" effort="8.0" velocity="1.0"/>\r\n    </joint>\r\n  </xacro:macro>\r\n\r\n  \x3c!-- Torso --\x3e\r\n  <link name="torso">\r\n    <visual>\r\n      <origin xyz="0 0 ${torso_length/2}" rpy="0 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="${torso_radius}" length="${torso_length}"/>\r\n      </geometry>\r\n      <material name="white"/>\r\n    </visual>\r\n    <inertial>\r\n      <mass value="10.0"/>\r\n      <origin xyz="0 0 ${torso_length/2}" rpy="0 0 0"/>\r\n      <inertia ixx="0.5" ixy="0.0" ixz="0.0" iyy="0.6" iyz="0.0" izz="0.2"/>\r\n    </inertial>\r\n  </link>\r\n\r\n  \x3c!-- Use the arm macro for both sides --\x3e\r\n  <xacro:arm prefix="left" side="1"/>\r\n  <xacro:arm prefix="right" side="-1"/>\r\n\r\n</robot>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"connecting-urdf-to-ros-2",children:"Connecting URDF to ROS 2"}),"\n",(0,t.jsx)(n.h3,{id:"robot-state-publisher",children:"Robot State Publisher"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"robot_state_publisher"})," node reads your URDF and publishes the forward kinematics to the ",(0,t.jsx)(n.code,{children:"/tf"})," topic:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Launch robot state publisher\r\nros2 run robot_state_publisher robot_state_publisher --ros-args -p robot_description:='$(cat /path/to/your/robot.urdf)'\n"})}),"\n",(0,t.jsx)(n.p,{children:"Or in a launch file:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\r\nfrom launch_ros.actions import Node\r\nfrom ament_index_python.packages import get_package_share_directory\r\nimport os\r\n\r\ndef generate_launch_description():\r\n    # Load URDF file\r\n    urdf_file = os.path.join(\r\n        get_package_share_directory('your_robot_description'),\r\n        'urdf',\r\n        'humanoid.urdf'\r\n    )\r\n\r\n    with open(urdf_file, 'r') as infp:\r\n        robot_desc = infp.read()\r\n\r\n    return LaunchDescription([\r\n        Node(\r\n            package='robot_state_publisher',\r\n            executable='robot_state_publisher',\r\n            name='robot_state_publisher',\r\n            parameters=[{\r\n                'robot_description': robot_desc\r\n            }],\r\n        )\r\n    ])\n"})}),"\n",(0,t.jsx)(n.h3,{id:"joint-state-publisher",children:"Joint State Publisher"}),"\n",(0,t.jsx)(n.p,{children:"For interactive visualization, use the joint state publisher:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'<launch>\r\n  <node name="robot_state_publisher" pkg="robot_state_publisher" exec="robot_state_publisher">\r\n    <param name="robot_description" value="$(find-pkg-share your_package)/urdf/humanoid.urdf"/>\r\n  </node>\r\n\r\n  <node name="joint_state_publisher" pkg="joint_state_publisher" exec="joint_state_publisher">\r\n    <param name="use_gui" value="true"/>\r\n  </node>\r\n</launch>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"urdf-best-practices",children:"URDF Best Practices"}),"\n",(0,t.jsx)(n.h3,{id:"1-proper-inertial-properties",children:"1. Proper Inertial Properties"}),"\n",(0,t.jsx)(n.p,{children:"Accurate inertial properties are crucial for physics simulation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Calculate inertial properties for common shapes --\x3e\r\n\x3c!-- For a cylinder: ixx = izz = m*(3*r\xb2 + h\xb2)/12, iyy = m*r\xb2/2 --\x3e\r\n<inertial>\r\n  <mass value="1.0"/>\r\n  <inertia ixx="0.002916667" ixy="0.0" ixz="0.0"\r\n           iyy="0.0025" iyz="0.0" izz="0.002916667"/>\r\n</inertial>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-logical-link-hierarchy",children:"2. Logical Link Hierarchy"}),"\n",(0,t.jsx)(n.p,{children:"Structure your URDF with a logical kinematic tree:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:"\x3c!-- Good: Clear parent-child relationships --\x3e\r\ntorso\r\n\u251c\u2500\u2500 head\r\n\u251c\u2500\u2500 left_upper_arm\r\n\u2502   \u2514\u2500\u2500 left_lower_arm\r\n\u251c\u2500\u2500 right_upper_arm\r\n\u2502   \u2514\u2500\u2500 right_lower_arm\r\n\u251c\u2500\u2500 left_upper_leg\r\n\u2502   \u2514\u2500\u2500 left_lower_leg\r\n\u2502       \u2514\u2500\u2500 left_foot\r\n\u2514\u2500\u2500 right_upper_leg\r\n    \u2514\u2500\u2500 right_lower_leg\r\n        \u2514\u2500\u2500 right_foot\n"})}),"\n",(0,t.jsx)(n.h3,{id:"3-appropriate-joint-limits",children:"3. Appropriate Joint Limits"}),"\n",(0,t.jsx)(n.p,{children:"Set realistic joint limits based on your physical robot:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Human-like joint limits --\x3e\r\n<joint name="elbow_joint" type="revolute">\r\n  <limit lower="0" upper="2.356" effort="10.0" velocity="1.0"/>\r\n  \x3c!-- Elbow can bend 135 degrees (0 to 3\u03c0/4 radians) --\x3e\r\n</joint>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"validating-urdf-models",children:"Validating URDF Models"}),"\n",(0,t.jsx)(n.h3,{id:"using-check_urdf",children:"Using check_urdf"}),"\n",(0,t.jsx)(n.p,{children:"ROS provides tools to validate your URDF:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Install urdfdom tools\r\nsudo apt-get install ros-humble-urdfdom-tools\r\n\r\n# Check URDF syntax\r\ncheck_urdf /path/to/your/robot.urdf\r\n\r\n# Get detailed information about the model\r\nurdf_to_graphiz /path/to/your/robot.urdf\n"})}),"\n",(0,t.jsx)(n.h3,{id:"visualizing-in-rviz",children:"Visualizing in RViz"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Launch RViz with robot model\r\nros2 launch urdf_tutorial display.launch.py model:=/path/to/your/robot.urdf\n"})}),"\n",(0,t.jsx)(n.h2,{id:"integration-with-control-systems",children:"Integration with Control Systems"}),"\n",(0,t.jsx)(n.h3,{id:"joint-state-message",children:"Joint State Message"}),"\n",(0,t.jsx)(n.p,{children:"The robot state publisher works with joint state messages to show actual robot poses:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom sensor_msgs.msg import JointState\r\nimport math\r\n\r\nclass JointStatePublisher(Node):\r\n    def __init__(self):\r\n        super().__init__('joint_state_publisher')\r\n\r\n        self.joint_pub = self.create_publisher(JointState, 'joint_states', 10)\r\n        self.timer = self.create_timer(0.1, self.publish_joint_states)\r\n\r\n        # Define joint names\r\n        self.joint_names = [\r\n            'neck_joint', 'left_shoulder_joint', 'left_elbow_joint',\r\n            'right_shoulder_joint', 'right_elbow_joint',\r\n            'left_hip_joint', 'left_knee_joint', 'left_ankle_joint',\r\n            'right_hip_joint', 'right_knee_joint', 'right_ankle_joint'\r\n        ]\r\n\r\n        # Initialize joint positions\r\n        self.joint_positions = [0.0] * len(self.joint_names)\r\n        self.time = 0.0\r\n\r\n    def publish_joint_states(self):\r\n        msg = JointState()\r\n        msg.name = self.joint_names\r\n        msg.position = self.joint_positions\r\n        msg.header.stamp = self.get_clock().now().to_msg()\r\n        msg.header.frame_id = 'base_link'\r\n\r\n        # Example: make joints oscillate for demonstration\r\n        for i in range(len(self.joint_positions)):\r\n            self.joint_positions[i] = 0.5 * math.sin(self.time + i * 0.5)\r\n\r\n        self.joint_pub.publish(msg)\r\n        self.time += 0.1\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = JointStatePublisher()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        node.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,t.jsx)(n.h3,{id:"forward-and-inverse-kinematics",children:"Forward and Inverse Kinematics"}),"\n",(0,t.jsx)(n.p,{children:"URDF models work with kinematics packages like MoveIt for advanced motion planning:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom moveit_msgs.srv import GetPositionFK, GetPositionIK\r\nfrom geometry_msgs.msg import PoseStamped\r\nfrom moveit_msgs.msg import RobotState\r\nfrom sensor_msgs.msg import JointState\r\n\r\nclass KinematicsNode(Node):\r\n    def __init__(self):\r\n        super().__init__('kinematics_node')\r\n\r\n        # Example: Use MoveIt's services for kinematics\r\n        # Forward kinematics service\r\n        self.fk_client = self.create_client(\r\n            GetPositionFK, 'compute_fk')\r\n\r\n        # Inverse kinematics service\r\n        self.ik_client = self.create_client(\r\n            GetPositionIK, 'compute_ik')\r\n\r\n        self.get_logger().info('Kinematics node initialized')\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    node = KinematicsNode()\r\n\r\n    try:\r\n        rclpy.spin(node)\r\n    except KeyboardInterrupt:\r\n        pass\r\n    finally:\r\n        node.destroy_node()\r\n        rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,t.jsx)(n.h2,{id:"troubleshooting-common-issues",children:"Troubleshooting Common Issues"}),"\n",(0,t.jsx)(n.h3,{id:"1-urdf-validation-errors",children:"1. URDF Validation Errors"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# If you get validation errors, check:\r\n# - All links have proper inertial properties\r\n# - Joint parents and children exist\r\n# - Joint limits are properly specified\r\n# - No circular dependencies in the kinematic tree\n"})}),"\n",(0,t.jsx)(n.h3,{id:"2-visualization-problems",children:"2. Visualization Problems"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ensure joint names in your URDF match the joint state messages"}),"\n",(0,t.jsx)(n.li,{children:"Check that the robot_state_publisher is running"}),"\n",(0,t.jsx)(n.li,{children:"Verify TF frames are being published correctly"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"3-physics-simulation-issues",children:"3. Physics Simulation Issues"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Verify inertial properties are realistic"}),"\n",(0,t.jsx)(n.li,{children:"Check that collision geometries are properly defined"}),"\n",(0,t.jsx)(n.li,{children:"Ensure joint limits are appropriate"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"URDF is fundamental to describing robot models in ROS 2. Key takeaways include:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Structure"}),": Links and joints form the kinematic tree"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Properties"}),": Visual, collision, and inertial properties define each link"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Macros"}),": Xacro simplifies complex robot descriptions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Integration"}),": Robot state publisher connects URDF to ROS 2 TF system"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Validation"}),": Tools exist to check and visualize your URDF models"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"With a properly defined URDF model, you can now integrate your robot description with ROS 2 control systems, simulation environments, and motion planning packages like MoveIt."})]})}function m(r={}){const{wrapper:n}={...(0,o.R)(),...r.components};return n?(0,t.jsx)(n,{...r,children:(0,t.jsx)(d,{...r})}):d(r)}},8453:(r,n,e)=>{e.d(n,{R:()=>l,x:()=>a});var i=e(6540);const t={},o=i.createContext(t);function l(r){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof r?r(n):{...n,...r}},[n,r])}function a(r){let n;return n=r.disableParentContext?"function"==typeof r.components?r.components(t):r.components||t:l(r.components),i.createElement(o.Provider,{value:n},r.children)}}}]);