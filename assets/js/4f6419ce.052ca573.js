"use strict";(globalThis.webpackChunkbook=globalThis.webpackChunkbook||[]).push([[4833],{3522:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>m,frontMatter:()=>o,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"module2/data-model/data-model","title":"Digital Twin Data Model","description":"This chapter defines the data structures and schemas used in the Gazebo-Unity digital twin system. Understanding these data models is crucial for developing robust simulation and visualization components.","source":"@site/docs/module2/data-model/data-model.md","sourceDirName":"module2/data-model","slug":"/module2/data-model/","permalink":"/physical-ai-book/docs/module2/data-model/","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/module2/data-model/data-model.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6,"title":"Digital Twin Data Model"}}');var a=r(4848),i=r(8453);const o={sidebar_position:6,title:"Digital Twin Data Model"},s="Digital Twin Data Model",d={},l=[{value:"Overview",id:"overview",level:2},{value:"Core Data Structures",id:"core-data-structures",level:2},{value:"Robot State Model",id:"robot-state-model",level:3},{value:"Sensor Data Model",id:"sensor-data-model",level:3},{value:"LiDAR Data Structure",id:"lidar-data-structure",level:4},{value:"Camera Data Structure",id:"camera-data-structure",level:4},{value:"IMU Data Structure",id:"imu-data-structure",level:4},{value:"Environment Data Model",id:"environment-data-model",level:2},{value:"World State Model",id:"world-state-model",level:3},{value:"Collision and Physics Model",id:"collision-and-physics-model",level:3},{value:"Control Command Model",id:"control-command-model",level:2},{value:"Robot Control Commands",id:"robot-control-commands",level:3},{value:"Navigation Commands",id:"navigation-commands",level:3},{value:"Communication Protocol Models",id:"communication-protocol-models",level:2},{value:"Message Envelope",id:"message-envelope",level:3},{value:"Error and Status Models",id:"error-and-status-models",level:3},{value:"Data Serialization Formats",id:"data-serialization-formats",level:2},{value:"JSON Schema Definitions",id:"json-schema-definitions",level:3},{value:"Coordinate System Conventions",id:"coordinate-system-conventions",level:2},{value:"Unified Coordinate System",id:"unified-coordinate-system",level:3},{value:"Coordinate Transformation",id:"coordinate-transformation",level:3},{value:"Data Validation and Quality Assurance",id:"data-validation-and-quality-assurance",level:2},{value:"Schema Validation",id:"schema-validation",level:3},{value:"Data Integrity Checks",id:"data-integrity-checks",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Data Compression",id:"data-compression",level:3},{value:"Efficient Data Streaming",id:"efficient-data-streaming",level:3},{value:"Data Persistence Models",id:"data-persistence-models",level:2},{value:"Log File Format",id:"log-file-format",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"digital-twin-data-model",children:"Digital Twin Data Model"})}),"\n",(0,a.jsx)(e.p,{children:"This chapter defines the data structures and schemas used in the Gazebo-Unity digital twin system. Understanding these data models is crucial for developing robust simulation and visualization components."}),"\n",(0,a.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsx)(e.p,{children:"The digital twin data model encompasses all information exchanged between Gazebo (physics simulation) and Unity (visualization), including robot states, sensor readings, environment data, and control commands."}),"\n",(0,a.jsx)(e.h2,{id:"core-data-structures",children:"Core Data Structures"}),"\n",(0,a.jsx)(e.h3,{id:"robot-state-model",children:"Robot State Model"}),"\n",(0,a.jsx)(e.p,{children:"The RobotState model represents the complete state of a robot in the simulation:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "robot_id": "string",\r\n  "timestamp": "double",\r\n  "pose": {\r\n    "position": {\r\n      "x": "double",\r\n      "y": "double",\r\n      "z": "double"\r\n    },\r\n    "orientation": {\r\n      "x": "double",\r\n      "y": "double",\r\n      "z": "double",\r\n      "w": "double"\r\n    }\r\n  },\r\n  "twist": {\r\n    "linear": {\r\n      "x": "double",\r\n      "y": "double",\r\n      "z": "double"\r\n    },\r\n    "angular": {\r\n      "x": "double",\r\n      "y": "double",\r\n      "z": "double"\r\n    }\r\n  },\r\n  "joint_states": [\r\n    {\r\n      "name": "string",\r\n      "position": "double",\r\n      "velocity": "double",\r\n      "effort": "double"\r\n    }\r\n  ],\r\n  "attached_objects": [\r\n    {\r\n      "object_id": "string",\r\n      "link_name": "string",\r\n      "relative_pose": "Pose"\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"sensor-data-model",children:"Sensor Data Model"}),"\n",(0,a.jsx)(e.p,{children:"The SensorData model standardizes sensor readings across different sensor types:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "sensor_id": "string",\r\n  "sensor_type": "enum: lidar | camera | imu | gps | depth_camera | force_torque",\r\n  "timestamp": "double",\r\n  "frame_id": "string",\r\n  "data": "object" // Type depends on sensor_type\r\n}\n'})}),"\n",(0,a.jsx)(e.h4,{id:"lidar-data-structure",children:"LiDAR Data Structure"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "sensor_id": "lidar_front",\r\n  "sensor_type": "lidar",\r\n  "timestamp": 1634567890.123,\r\n  "frame_id": "lidar_link",\r\n  "data": {\r\n    "angle_min": "double",\r\n    "angle_max": "double",\r\n    "angle_increment": "double",\r\n    "time_increment": "double",\r\n    "scan_time": "double",\r\n    "range_min": "double",\r\n    "range_max": "double",\r\n    "ranges": ["double"], // Array of range measurements\r\n    "intensities": ["double"] // Optional intensity measurements\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h4,{id:"camera-data-structure",children:"Camera Data Structure"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "sensor_id": "camera_front",\r\n  "sensor_type": "camera",\r\n  "timestamp": 1634567890.123,\r\n  "frame_id": "camera_link",\r\n  "data": {\r\n    "width": "int",\r\n    "height": "int",\r\n    "encoding": "string", // "rgb8", "bgr8", "mono8", etc.\r\n    "is_bigendian": "bool",\r\n    "step": "int", // Full row length in bytes\r\n    "data": "base64_encoded_image_bytes",\r\n    "header": {\r\n      "stamp": "timestamp",\r\n      "frame_id": "string"\r\n    },\r\n    "camera_info": {\r\n      "width": "int",\r\n      "height": "int",\r\n      "distortion_model": "string",\r\n      "D": ["double"], // Distortion coefficients\r\n      "K": ["double"], // 3x3 intrinsic matrix (row-major)\r\n      "R": ["double"], // 3x3 rectification matrix\r\n      "P": ["double"]  // 3x4 projection matrix\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h4,{id:"imu-data-structure",children:"IMU Data Structure"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "sensor_id": "imu_base",\r\n  "sensor_type": "imu",\r\n  "timestamp": 1634567890.123,\r\n  "frame_id": "imu_link",\r\n  "data": {\r\n    "orientation": {\r\n      "x": "double",\r\n      "y": "double",\r\n      "z": "double",\r\n      "w": "double"\r\n    },\r\n    "orientation_covariance": ["double"], // 9-element array\r\n    "angular_velocity": {\r\n      "x": "double",\r\n      "y": "double",\r\n      "z": "double"\r\n    },\r\n    "angular_velocity_covariance": ["double"], // 9-element array\r\n    "linear_acceleration": {\r\n      "x": "double",\r\n      "y": "double",\r\n      "z": "double"\r\n    },\r\n    "linear_acceleration_covariance": ["double"] // 9-element array\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"environment-data-model",children:"Environment Data Model"}),"\n",(0,a.jsx)(e.h3,{id:"world-state-model",children:"World State Model"}),"\n",(0,a.jsx)(e.p,{children:"The WorldState model represents the complete state of the simulation environment:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "world_id": "string",\r\n  "timestamp": "double",\r\n  "gravity": {\r\n    "x": "double",\r\n    "y": "double",\r\n    "z": "double"\r\n  },\r\n  "models": [\r\n    {\r\n      "model_id": "string",\r\n      "name": "string",\r\n      "pose": "Pose",\r\n      "twist": "Twist",\r\n      "static": "bool"\r\n    }\r\n  ],\r\n  "lights": [\r\n    {\r\n      "name": "string",\r\n      "type": "enum: directional | point | spot",\r\n      "pose": "Pose",\r\n      "diffuse": {"r": "double", "g": "double", "b": "double", "a": "double"},\r\n      "specular": {"r": "double", "g": "double", "b": "double", "a": "double"}\r\n    }\r\n  ],\r\n  "materials": [\r\n    {\r\n      "name": "string",\r\n      "ambient": {"r": "double", "g": "double", "b": "double", "a": "double"},\r\n      "diffuse": {"r": "double", "g": "double", "b": "double", "a": "double"},\r\n      "specular": {"r": "double", "g": "double", "b": "double", "a": "double"},\r\n      "emissive": {"r": "double", "g": "double", "b": "double", "a": "double"},\r\n      "shininess": "double",\r\n      "transparency": "double"\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"collision-and-physics-model",children:"Collision and Physics Model"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "collision_id": "string",\r\n  "model_id": "string",\r\n  "link_name": "string",\r\n  "geometry": {\r\n    "type": "enum: box | sphere | cylinder | mesh | plane",\r\n    "size": ["double"], // For box: [x, y, z], for sphere: [radius], etc.\r\n    "mesh_uri": "string", // For mesh type\r\n    "mesh_scale": {"x": "double", "y": "double", "z": "double"}\r\n  },\r\n  "surface": {\r\n    "friction": {\r\n      "ode": {\r\n        "mu": "double",\r\n        "mu2": "double",\r\n        "fdir1": {"x": "double", "y": "double", "z": "double"}\r\n      },\r\n      "bullet": {\r\n        "friction": "double",\r\n        "friction2": "double"\r\n      }\r\n    },\r\n    "bounce": {\r\n      "restitution_coefficient": "double",\r\n      "threshold": "double"\r\n    },\r\n    "contact": {\r\n      "ode": {\r\n        "kp": "double", // Spring stiffness\r\n        "kd": "double", // Damping coefficient\r\n        "max_vel": "double",\r\n        "min_depth": "double"\r\n      }\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"control-command-model",children:"Control Command Model"}),"\n",(0,a.jsx)(e.h3,{id:"robot-control-commands",children:"Robot Control Commands"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "command_id": "string",\r\n  "robot_id": "string",\r\n  "timestamp": "double",\r\n  "command_type": "enum: velocity | position | effort | trajectory",\r\n  "targets": [\r\n    {\r\n      "joint_name": "string",\r\n      "position": "double", // For position control\r\n      "velocity": "double", // For velocity control\r\n      "effort": "double",   // For effort control\r\n      "k_position": "double", // Position gain (optional)\r\n      "k_velocity": "double"  // Velocity gain (optional)\r\n    }\r\n  ],\r\n  "duration": "double", // Command duration in seconds\r\n  "header": {\r\n    "seq": "int",\r\n    "stamp": "timestamp",\r\n    "frame_id": "string"\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"navigation-commands",children:"Navigation Commands"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "command_id": "string",\r\n  "robot_id": "string",\r\n  "timestamp": "double",\r\n  "command_type": "navigation",\r\n  "goal": {\r\n    "position": {"x": "double", "y": "double", "z": "double"},\r\n    "orientation": {"x": "double", "y": "double", "z": "double", "w": "double"}\r\n  },\r\n  "tolerance": {\r\n    "position": "double",\r\n    "orientation": "double"\r\n  },\r\n  "path_constraints": {\r\n    "max_velocity": "double",\r\n    "max_acceleration": "double",\r\n    "min_turn_radius": "double"\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"communication-protocol-models",children:"Communication Protocol Models"}),"\n",(0,a.jsx)(e.h3,{id:"message-envelope",children:"Message Envelope"}),"\n",(0,a.jsx)(e.p,{children:"All messages follow a standardized envelope structure:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "message_id": "string",\r\n  "type": "string", // Message type identifier\r\n  "version": "string", // Schema version (e.g., "1.0.0")\r\n  "timestamp": "double", // Unix timestamp with nanosecond precision\r\n  "source": {\r\n    "system": "enum: gazebo | unity | bridge | client",\r\n    "component": "string", // Specific component name\r\n    "instance_id": "string" // Unique instance identifier\r\n  },\r\n  "destination": {\r\n    "system": "enum: gazebo | unity | bridge | client",\r\n    "component": "string",\r\n    "instance_id": "string"\r\n  },\r\n  "payload": "object", // Actual data payload\r\n  "metadata": {\r\n    "priority": "enum: low | normal | high | critical",\r\n    "reliability": "enum: best_effort | reliable",\r\n    "sequence_number": "int",\r\n    "checksum": "string" // Optional data integrity check\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"error-and-status-models",children:"Error and Status Models"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "message_id": "error_response_123",\r\n  "type": "error",\r\n  "timestamp": 1634567890.123,\r\n  "source": {\r\n    "system": "gazebo",\r\n    "component": "physics_engine",\r\n    "instance_id": "gazebo_server_1"\r\n  },\r\n  "destination": {\r\n    "system": "unity",\r\n    "component": "visualization",\r\n    "instance_id": "unity_client_1"\r\n  },\r\n  "payload": {\r\n    "error_code": "int",\r\n    "error_message": "string",\r\n    "severity": "enum: warning | error | fatal",\r\n    "context": "object" // Additional context-specific data\r\n  },\r\n  "metadata": {\r\n    "priority": "high",\r\n    "reliability": "reliable",\r\n    "sequence_number": 12345\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"data-serialization-formats",children:"Data Serialization Formats"}),"\n",(0,a.jsx)(e.h3,{id:"json-schema-definitions",children:"JSON Schema Definitions"}),"\n",(0,a.jsx)(e.p,{children:"For robust data validation, we define JSON schemas for each data type:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "$schema": "http://json-schema.org/draft-07/schema#",\r\n  "title": "RobotState",\r\n  "type": "object",\r\n  "required": ["robot_id", "timestamp", "pose"],\r\n  "properties": {\r\n    "robot_id": {\r\n      "type": "string",\r\n      "pattern": "^[a-zA-Z0-9_-]+$"\r\n    },\r\n    "timestamp": {\r\n      "type": "number",\r\n      "minimum": 0\r\n    },\r\n    "pose": {\r\n      "$ref": "#/definitions/Pose"\r\n    },\r\n    "twist": {\r\n      "$ref": "#/definitions/Twist"\r\n    },\r\n    "joint_states": {\r\n      "type": "array",\r\n      "items": {\r\n        "$ref": "#/definitions/JointState"\r\n      }\r\n    }\r\n  },\r\n  "definitions": {\r\n    "Pose": {\r\n      "type": "object",\r\n      "properties": {\r\n        "position": {"$ref": "#/definitions/Vector3"},\r\n        "orientation": {"$ref": "#/definitions/Quaternion"}\r\n      }\r\n    },\r\n    "Vector3": {\r\n      "type": "object",\r\n      "properties": {\r\n        "x": {"type": "number"},\r\n        "y": {"type": "number"},\r\n        "z": {"type": "number"}\r\n      }\r\n    },\r\n    "Quaternion": {\r\n      "type": "object",\r\n      "properties": {\r\n        "x": {"type": "number"},\r\n        "y": {"type": "number"},\r\n        "z": {"type": "number"},\r\n        "w": {"type": "number"}\r\n      }\r\n    },\r\n    "Twist": {\r\n      "type": "object",\r\n      "properties": {\r\n        "linear": {"$ref": "#/definitions/Vector3"},\r\n        "angular": {"$ref": "#/definitions/Vector3"}\r\n      }\r\n    },\r\n    "JointState": {\r\n      "type": "object",\r\n      "properties": {\r\n        "name": {"type": "string"},\r\n        "position": {"type": "number"},\r\n        "velocity": {"type": "number"},\r\n        "effort": {"type": "number"}\r\n      }\r\n    }\r\n  }\r\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"coordinate-system-conventions",children:"Coordinate System Conventions"}),"\n",(0,a.jsx)(e.h3,{id:"unified-coordinate-system",children:"Unified Coordinate System"}),"\n",(0,a.jsx)(e.p,{children:"To ensure consistency between Gazebo and Unity:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Gazebo"}),": Right-handed coordinate system (X forward, Y left, Z up)"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Unity"}),": Left-handed coordinate system (X right, Y up, Z forward)"]}),"\n"]}),"\n",(0,a.jsx)(e.h3,{id:"coordinate-transformation",children:"Coordinate Transformation"}),"\n",(0,a.jsx)(e.p,{children:"When transferring data between systems, apply these transformations:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-csharp",children:"// Gazebo to Unity transformation\r\nVector3 GazeboToUnity(Vector3 gazeboPos)\r\n{\r\n    return new Vector3(\r\n        (float)gazeboPos.Y,    // Y -> X\r\n        (float)gazeboPos.Z,    // Z -> Y\r\n        (float)gazeboPos.X     // X -> Z\r\n    );\r\n}\r\n\r\nQuaternion GazeboToUnity(Quaternion gazeboQuat)\r\n{\r\n    return new Quaternion(\r\n        (float)gazeboQuat.Y,   // Y -> X\r\n        (float)gazeboQuat.Z,   // Z -> Y\r\n        (float)gazeboQuat.X,   // X -> Z\r\n        (float)gazeboQuat.W    // W -> W\r\n    );\r\n}\n"})}),"\n",(0,a.jsx)(e.h2,{id:"data-validation-and-quality-assurance",children:"Data Validation and Quality Assurance"}),"\n",(0,a.jsx)(e.h3,{id:"schema-validation",children:"Schema Validation"}),"\n",(0,a.jsx)(e.p,{children:"Implement schema validation for all incoming data:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'import jsonschema\r\nfrom jsonschema import validate\r\n\r\ndef validate_robot_state(data):\r\n    """Validate robot state against schema"""\r\n    schema = {\r\n        "type": "object",\r\n        "required": ["robot_id", "timestamp", "pose"],\r\n        "properties": {\r\n            "robot_id": {"type": "string"},\r\n            "timestamp": {"type": "number", "minimum": 0},\r\n            "pose": {\r\n                "type": "object",\r\n                "required": ["position", "orientation"],\r\n                "properties": {\r\n                    "position": {\r\n                        "type": "object",\r\n                        "required": ["x", "y", "z"],\r\n                        "properties": {\r\n                            "x": {"type": "number"},\r\n                            "y": {"type": "number"},\r\n                            "z": {"type": "number"}\r\n                        }\r\n                    },\r\n                    "orientation": {\r\n                        "type": "object",\r\n                        "required": ["x", "y", "z", "w"],\r\n                        "properties": {\r\n                            "x": {"type": "number", "minimum": -1, "maximum": 1},\r\n                            "y": {"type": "number", "minimum": -1, "maximum": 1},\r\n                            "z": {"type": "number", "minimum": -1, "maximum": 1},\r\n                            "w": {"type": "number", "minimum": -1, "maximum": 1}\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    try:\r\n        validate(instance=data, schema=schema)\r\n        return True, "Valid"\r\n    except jsonschema.exceptions.ValidationError as e:\r\n        return False, str(e)\n'})}),"\n",(0,a.jsx)(e.h3,{id:"data-integrity-checks",children:"Data Integrity Checks"}),"\n",(0,a.jsx)(e.p,{children:"Implement checksums and validation for critical data:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'import hashlib\r\nimport json\r\n\r\ndef calculate_checksum(data):\r\n    """Calculate SHA-256 checksum for data integrity"""\r\n    json_str = json.dumps(data, sort_keys=True, separators=(\',\', \':\'))\r\n    return hashlib.sha256(json_str.encode()).hexdigest()\r\n\r\ndef verify_data_integrity(data, expected_checksum):\r\n    """Verify data integrity using checksum"""\r\n    actual_checksum = calculate_checksum(data)\r\n    return actual_checksum == expected_checksum\n'})}),"\n",(0,a.jsx)(e.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,a.jsx)(e.h3,{id:"data-compression",children:"Data Compression"}),"\n",(0,a.jsx)(e.p,{children:"For high-frequency data transmission, implement compression:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:'import numpy as np\r\nimport struct\r\nimport zlib\r\n\r\ndef compress_sensor_data(ranges):\r\n    """Compress LiDAR range data using quantization and zlib"""\r\n    # Quantize to 16-bit values\r\n    quantized = np.clip(np.array(ranges) * 1000, 0, 65535).astype(np.uint16)\r\n\r\n    # Pack binary data\r\n    binary_data = struct.pack(f\'<{len(quantized)}H\', *quantized)\r\n\r\n    # Compress\r\n    compressed = zlib.compress(binary_data)\r\n\r\n    return compressed\r\n\r\ndef decompress_sensor_data(compressed_data):\r\n    """Decompress LiDAR range data"""\r\n    # Decompress\r\n    binary_data = zlib.decompress(compressed_data)\r\n\r\n    # Unpack\r\n    num_ranges = len(binary_data) // 2\r\n    quantized = struct.unpack(f\'<{num_ranges}H\', binary_data)\r\n\r\n    # Convert back to float\r\n    ranges = [q / 1000.0 for q in quantized]\r\n\r\n    return ranges\n'})}),"\n",(0,a.jsx)(e.h3,{id:"efficient-data-streaming",children:"Efficient Data Streaming"}),"\n",(0,a.jsx)(e.p,{children:"For real-time applications, consider binary protocols:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-python",children:"import struct\r\n\r\nclass EfficientDataStreamer:\r\n    \"\"\"Efficient binary data streaming for real-time applications\"\"\"\r\n\r\n    @staticmethod\r\n    def serialize_robot_state_binary(robot_state):\r\n        \"\"\"Serialize robot state in compact binary format\"\"\"\r\n        data = bytearray()\r\n\r\n        # Pack timestamp (double - 8 bytes)\r\n        data.extend(struct.pack('d', robot_state['timestamp']))\r\n\r\n        # Pack position (3 doubles - 24 bytes)\r\n        pos = robot_state['pose']['position']\r\n        data.extend(struct.pack('ddd', pos['x'], pos['y'], pos['z']))\r\n\r\n        # Pack orientation (4 doubles - 32 bytes)\r\n        orient = robot_state['pose']['orientation']\r\n        data.extend(struct.pack('dddd', orient['x'], orient['y'], orient['z'], orient['w']))\r\n\r\n        # Pack linear velocity (3 doubles - 24 bytes)\r\n        if 'twist' in robot_state:\r\n            linear = robot_state['twist']['linear']\r\n            data.extend(struct.pack('ddd', linear['x'], linear['y'], linear['z']))\r\n\r\n        return bytes(data)\r\n\r\n    @staticmethod\r\n    def deserialize_robot_state_binary(binary_data):\r\n        \"\"\"Deserialize robot state from binary format\"\"\"\r\n        offset = 0\r\n\r\n        # Unpack timestamp\r\n        timestamp = struct.unpack_from('d', binary_data, offset)[0]\r\n        offset += 8\r\n\r\n        # Unpack position\r\n        pos_x, pos_y, pos_z = struct.unpack_from('ddd', binary_data, offset)\r\n        offset += 24\r\n\r\n        # Unpack orientation\r\n        orient_x, orient_y, orient_z, orient_w = struct.unpack_from('dddd', binary_data, offset)\r\n        offset += 32\r\n\r\n        # Unpack linear velocity\r\n        linear_x, linear_y, linear_z = struct.unpack_from('ddd', binary_data, offset)\r\n\r\n        return {\r\n            'timestamp': timestamp,\r\n            'pose': {\r\n                'position': {'x': pos_x, 'y': pos_y, 'z': pos_z},\r\n                'orientation': {'x': orient_x, 'y': orient_y, 'z': orient_z, 'w': orient_w}\r\n            },\r\n            'twist': {\r\n                'linear': {'x': linear_x, 'y': linear_y, 'z': linear_z}\r\n            }\r\n        }\n"})}),"\n",(0,a.jsx)(e.h2,{id:"data-persistence-models",children:"Data Persistence Models"}),"\n",(0,a.jsx)(e.h3,{id:"log-file-format",children:"Log File Format"}),"\n",(0,a.jsx)(e.p,{children:"For simulation logging and replay:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "log_version": "1.0",\r\n  "session_id": "string",\r\n  "start_time": "timestamp",\r\n  "duration": "double",\r\n  "metadata": {\r\n    "gazebo_version": "string",\r\n    "unity_version": "string",\r\n    "robot_model": "string",\r\n    "world_file": "string"\r\n  },\r\n  "events": [\r\n    {\r\n      "timestamp": "double",\r\n      "event_type": "enum: state_update | sensor_data | command | collision | error",\r\n      "data": "object" // Event-specific data\r\n    }\r\n  ]\r\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Version Compatibility"}),": Always include version information in data schemas"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Backward Compatibility"}),": Design schemas to support older versions"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Validation"}),": Implement comprehensive validation at system boundaries"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Performance"}),": Optimize data structures for high-frequency transmission"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Security"}),": Validate all incoming data to prevent injection attacks"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Documentation"}),": Maintain up-to-date schema documentation"]}),"\n",(0,a.jsxs)(e.li,{children:[(0,a.jsx)(e.strong,{children:"Testing"}),": Include data model validation in automated tests"]}),"\n"]}),"\n",(0,a.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsx)(e.p,{children:"With the data model established, we'll now create a comprehensive validation plan to ensure the accuracy and reliability of our digital twin simulations."})]})}function m(n={}){const{wrapper:e}={...(0,i.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(c,{...n})}):c(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>o,x:()=>s});var t=r(6540);const a={},i=t.createContext(a);function o(n){const e=t.useContext(i);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:o(n.components),t.createElement(i.Provider,{value:e},n.children)}}}]);